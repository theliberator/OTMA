<?xml version="1.0" encoding="utf-8"?>
<!-- In this file all static NPCs, teleports, event triggers and the layout for
	 the random generated upper levels are defined. NPCs, event triggers and
	 teleports are basically all objects on the map that trigger one or more
	 events associated with the trigger. Their place on the map is specified
	 with a pair of x and y coordinates.

	 The trigger can have an arbitrary number of events attached which connect
	 to events (see mapEvents.xml) by an id and an optional condition (the
	 event is only executed if the condition is true or no condition is set).
	 Conditions can be set or unset by events. Per default, all of the
	 associated events will be executed when their condition is true or unset.
	 For NPCs, this behaviour can be changed with the 'te_mode' attribute (it
	 cannot be used with plain event triggers or teleports). It can be given
	 the values "all", "single", or "rand". The active talkevents in mode
	 "single" can then be controlled by actions executed by the associated
	 events (see examples in mapEvents.xml). Note that conditions still apply
	 to different te modes.

	 Teleports are basically convenient methods for creating event triggers
	 with a teleport action.

	 NPCs can be thought of event triggers with additional attributes, e.g.
	 name, icon, etc. which result in a graphical representation on the map
	 which the player cannot pass through.

	 For event triggers (which are invisible) an attribute "onwalkover" can be
	 specified which controls whether the event triggers only if the player
	 directly clicked on the place of the event trigger or also when he/she
	 passes by.
	 
	 Other NPCs, event triggers and teleports may be generated by the
	 StoryGenerator. -->
	 
<layout>

	<npcs>
		<!-- Talkevents are executed beginning with the first event. To execute
			 other talkevents associated with the NPC, use one of the actions
			 shown in mapEvents.xml. -->
		<!--
		<npc id="andi" class="npc" name="Andi" x="13" y="17" direction="down" npc_typ="1" te_mode="single">
			<talkevent id="andi_a"/>
			<talkevent id="andi_b"/>
			<talkevent id="andi_c"/>
		</npc>
		<npc id="otto" class="npc" name="Otto" x="10" y="22" direction="up" npc_typ="2" te_mode="single">
			<talkevent id="otto_a"/>
			<talkevent id="otto_b"/>
			<talkevent id="otto_c"/>
			<talkevent id="otto_d"/>
		</npc>
		-->
		<npc id="miller" class="npc" name="Mr. Miller" x="10" y="17" direction="up" npc_typ="3" te_mode="single">
			<talkevent id="miller_a"/>
			<talkevent id="miller_b"/>
		</npc>
		<!-- <npc id="TESTXX" class="npc" name="END GAME" x="10" y="23" direction="left" npc_typ="2">
			<talkevent id="E_END"/>
		</npc> -->

		<npc id="doorman_otma" class="security" name="Agent Smith" x="19" y="17" direction="down" npc_typ="0">
			<talkevent id="doorman_otma_closed" condition="C_NOT_ALL_HINTS_COLLECTED"/>
			<talkevent id="doorman_otma_opened" condition="C_ALL_HINTS_COLLECTED"/>
		</npc>
		<npc id="receptionist" class="npc" name="" x="3" y="21" direction="right" npc_typ="1">
		</npc>

		<npc id="cnstr_sgn_0" class="construction_sign" name="" x="15" y="6" direction="down">
			<talkevent id="TE_MAIN_FLOOR_CNSTR_SIGN_UPR"/>
		</npc>
		<npc id="cnstr_sgn_1" class="construction_sign" name="" x="16" y="6" direction="down">
			<talkevent id="TE_MAIN_FLOOR_CNSTR_SIGN_UPR"/>
		</npc>
		<npc id="cnstr_sgn_2" class="construction_sign" name="" x="15" y="22" direction="up">
			<talkevent id="TE_MAIN_FLOOR_CNSTR_SIGN_LWR"/>
		</npc>
		<npc id="cnstr_sgn_3" class="construction_sign" name="" x="16" y="22" direction="up">
			<talkevent id="TE_MAIN_FLOOR_CNSTR_SIGN_LWR"/>
		</npc>

		<npc id="otma_lecturer" class="scientist" name="" x="28" y="17" direction="down">
			<talkevent id="TE_OTMA_LECTURER"/>
		</npc>
	</npcs>

	<teleports>
		<!-- lower stairs -->
		<teleport id="u0_0" from="18,24,0" to="61,21,1" direction="up" onwalkover="yes"> <event id="level_up"/> </teleport>
		<teleport id="u0_1" from="19,24,0" to="61,21,1" direction="up" onwalkover="yes"> <event id="level_up"/> </teleport>
		<teleport id="d0_0" from="60,24,1" to="18,21,0" direction="up" onwalkover="yes"> <event id="level_down_entrance"/> </teleport>
		<teleport id="d0_1" from="61,24,1" to="18,21,0" direction="up" onwalkover="yes"> <event id="level_down_entrance"/> </teleport>
		<!-- upper stairs -->
		<teleport id="u1_0" from="18,3,0" to="61,6,1" direction="down" onwalkover="yes"> <event id="level_up"/> </teleport>
		<teleport id="u1_1" from="19,3,0" to="61,6,1" direction="down" onwalkover="yes"> <event id="level_up"/> </teleport>
		<teleport id="d1_0" from="60,3,1" to="18,6,0" direction="down" onwalkover="yes"> <event id="level_down_entrance"/> </teleport>
		<teleport id="d1_1" from="61,3,1" to="18,6,0" direction="down" onwalkover="yes"> <event id="level_down_entrance"/> </teleport>
	</teleports>

	<eventtriggers>
		<eventtrigger id="Eingang1" x="5" y="26" onwalkover="yes"><event id="dont_leave"/></eventtrigger>
		<eventtrigger id="Eingang2" x="6" y="26" onwalkover="yes"><event id="dont_leave"/></eventtrigger>
		<eventtrigger id="Eingang3" x="7" y="26" onwalkover="yes"><event id="dont_leave"/></eventtrigger>
		<eventtrigger id="Eingang4" x="8" y="26" onwalkover="yes"><event id="dont_leave"/></eventtrigger>
		
		<eventtrigger id="EG_room1" x="14" y="9"><event id="closed_room_left"/></eventtrigger>
		<eventtrigger id="EG_room2" x="20" y="9"><event id="closed_room_right"/></eventtrigger>

		<eventtrigger id="EG_OTMA_Room" x="20" y="18">
		    <event id="E_OTMA_ROOM_LOCKED" condition="C_NOT_ALL_HINTS_COLLECTED"/>
		    <event id="E_ENTER_OTMA_ROOM" condition="C_ALL_HINTS_COLLECTED"/>
		</eventtrigger>

		<eventtrigger id="ET_RECEPTION_0" x="2" y="19" onwalkover="yes">
			<event id="E_DO_NOT_ENTER_RECEPTION"/>
		</eventtrigger>
		<eventtrigger id="ET_RECEPTION_1" x="3" y="19" onwalkover="yes">
			<event id="E_DO_NOT_ENTER_RECEPTION"/>
		</eventtrigger>

		<eventtrigger id="ET_COFFFE_0" x="5" y="17"><event id="E_RAISE_CON_25"/></eventtrigger>
		<eventtrigger id="ET_COFFFE_1" x="7" y="17"><event id="E_RAISE_CON_50"/></eventtrigger>
		<eventtrigger id="ET_COFFFE_2" x="11" y="17"><event id="E_RAISE_CON_100"/></eventtrigger>

		<eventtrigger id="ET_RECEPTION" x="5" y="21" onwalkover="yes">
			<event id="TE_RECEPTIONIST"/>
		</eventtrigger>

		<eventtrigger id="ET_EXIT_OTMA_ROOM" x="23" y="18" onwalkover="yes">
			<event id="E_EXIT_OTMA_ROOM"/>
		</eventtrigger>
	</eventtriggers>
	
	<level name="default">
		<entry_tp id="d0_0"/>
		<entry_tp id="d0_1"/>
		<entry_tp id="d1_0"/>
		<entry_tp id="d1_1"/>
		<!-- lower staircase -->
		<stairs from="63,24" to="61,21" direction="up" level="level_up"/>
		<stairs from="64,24" to="61,21" direction="up" level="level_up"/>
		<stairs from="60,24" to="63,21" direction="up" level="level_down"/>
		<stairs from="61,24" to="63,21" direction="up" level="level_down"/>
		<!-- upper staircase -->
		<stairs from="63,3" to="61,6" direction="down" level="level_up"/>
		<stairs from="64,3" to="61,6" direction="down" level="level_up"/>
		<stairs from="60,3" to="63,6" direction="down" level="level_down"/>
		<stairs from="61,3" to="63,6" direction="down" level="level_down"/>

		<room nr="otma">
	        <chair pos="26,20"/>
	        <chair pos="27,20"/>
	        <chair pos="28,20"/>
	        <chair pos="30,20"/>
	        <chair pos="31,20"/>
	        <chair pos="26,22"/>
	        <chair pos="27,22"/>
	        <chair pos="28,22"/>
	        <chair pos="30,22"/>
	        <chair pos="31,22"/>
	        <chair pos="26,24"/>
	        <chair pos="27,24"/>
	        <chair pos="28,24"/>
	        <chair pos="30,24"/>
	        <chair pos="31,24"/>
		</room>

	    <room nr="0">
			<door_in from="59,9" to="56,9" direction="left"/>
			<door_out from="56,9" to ="59,9" direction="right"/>
	        <lecturer pos="53,3"/>
	        <chair pos="48,6"/>
	        <chair pos="49,6"/>
	        <chair pos="50,6"/>
	        <chair pos="52,6"/>
	        <chair pos="53,6"/>
	        <chair pos="48,8"/>
	        <chair pos="49,8"/>
	        <chair pos="50,8"/>
	        <chair pos="52,8"/>
	        <chair pos="53,8"/>
	        <chair pos="48,10"/>
	        <chair pos="49,10"/>
	        <chair pos="50,10"/>
	        <chair pos="52,10"/>
	        <chair pos="53,10"/>
		</room>
		<room nr="1">
			<door_in from="59,18" to="56,18" direction="left"/>
			<door_out from="56,18" to ="59,18" direction="right"/>
		    <lecturer pos="54,16"/>
	        <chair pos="48,20"/>
	        <chair pos="49,20"/>
	        <chair pos="50,20"/>
	        <chair pos="52,20"/>
	        <chair pos="53,20"/>
	        <chair pos="48,22"/>
	        <chair pos="49,22"/>
	        <chair pos="50,22"/>
	        <chair pos="52,22"/>
	        <chair pos="53,22"/>
	        <chair pos="48,24"/>
	        <chair pos="49,24"/>
	        <chair pos="50,24"/>
	        <chair pos="52,24"/>
	        <chair pos="53,24"/>
		</room>
	    <room nr="2">
			<door_in from="65,9" to="68,9" direction="right"/>
			<door_out from="68,9" to ="65,9" direction="left"/>
	        <lecturer pos="71,3"/>
	        <chair pos="71,6"/>
	        <chair pos="72,6"/>
	        <chair pos="73,6"/>
	        <chair pos="75,6"/>
	        <chair pos="76,6"/>
	        <chair pos="71,8"/>
	        <chair pos="72,8"/>
	        <chair pos="73,8"/>
	        <chair pos="75,8"/>
	        <chair pos="76,8"/>
	        <chair pos="71,10"/>
	        <chair pos="72,10"/>
	        <chair pos="73,10"/>
	        <chair pos="75,10"/>
	        <chair pos="76,10"/>
		</room>
		<room nr="3">
			<door_in from="65,18" to="68,18" direction="right"/>
			<door_out from="68,18" to ="65,18" direction="left"/>
		    <lecturer pos="71,17"/>
	        <chair pos="71,20"/>
	        <chair pos="72,20"/>
	        <chair pos="73,20"/>
	        <chair pos="75,20"/>
	        <chair pos="76,20"/>
	        <chair pos="71,22"/>
	        <chair pos="72,22"/>
	        <chair pos="73,22"/>
	        <chair pos="75,22"/>
	        <chair pos="76,22"/>
	        <chair pos="71,24"/>
	        <chair pos="72,24"/>
	        <chair pos="73,24"/>
	        <chair pos="75,24"/>
	        <chair pos="76,24"/>
		</room>
	</level>

</layout>

